<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Hadoop相关 | Blog</title><meta name="description" content="Hadoop相关"><meta name="keywords" content="Hadoop,大数据"><meta name="author" content="Fibonacci"><meta name="copyright" content="Fibonacci"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://sovwcwsfm.com/blog/page/hadoop"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Hadoop相关"><meta name="twitter:description" content="Hadoop相关"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta property="og:type" content="article"><meta property="og:title" content="Hadoop相关"><meta property="og:url" content="http://sovwcwsfm.com/blog/page/hadoop"><meta property="og:site_name" content="Blog"><meta property="og:description" content="Hadoop相关"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="Hive相关" href="http://sovwcwsfm.com/blog/page/hive.html"><link rel="next" title="Handler相关" href="http://sovwcwsfm.com/blog/page/handler.html"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://www.sovwcwsfm.com","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'false',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: undefined,
  copy_copyright_js: false
  
}</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="header"> <div id="page-header"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Blog</a></span><i class="fa fa-bars fa-fw toggle-menu pull-right close" aria-hidden="true"></i><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 文章总览</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">22</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">20</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 文章总览</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友情链接</span></a></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#Hadoop"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">Hadoop</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#%E5%88%9D%E8%AF%86"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">初识</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#HDFS"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">HDFS</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc_mobile_items-number">2.1.1.</span> <span class="toc_mobile_items-text">核心思想</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87"><span class="toc_mobile_items-number">2.1.2.</span> <span class="toc_mobile_items-text">设计目标</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%9E%B6%E6%9E%84"><span class="toc_mobile_items-number">2.1.3.</span> <span class="toc_mobile_items-text">架构</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1"><span class="toc_mobile_items-number">2.1.4.</span> <span class="toc_mobile_items-text">核心设计</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%BF%83%E8%B7%B3%E6%9C%BA%E5%88%B6"><span class="toc_mobile_items-number">2.1.4.1.</span> <span class="toc_mobile_items-text">心跳机制</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#HDFS%E7%9A%84%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="toc_mobile_items-number">2.1.4.1.1.</span> <span class="toc_mobile_items-text">HDFS的启动流程：</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%AE%89%E5%85%A8%E6%A8%A1%E5%BC%8F"><span class="toc_mobile_items-number">2.1.4.2.</span> <span class="toc_mobile_items-text">安全模式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%89%AF%E6%9C%AC%E6%9C%BA%E5%88%B6"><span class="toc_mobile_items-number">2.1.4.3.</span> <span class="toc_mobile_items-text">副本机制</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link"><span class="toc_mobile_items-number">2.1.4.4.</span> <span class="toc_mobile_items-text"></span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E5%89%AF%E6%9C%AC%E6%9C%BA%E5%88%B6-1"><span class="toc_mobile_items-number">2.1.5.</span> <span class="toc_mobile_items-text">副本机制</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%89%AF%E6%9C%AC%E5%AD%98%E6%94%BE%E7%AD%96%E7%95%A5"><span class="toc_mobile_items-number">2.1.5.1.</span> <span class="toc_mobile_items-text">副本存放策略</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%89%AF%E6%9C%AC%E5%88%86%E5%B8%83%E8%A7%84%E5%88%99"><span class="toc_mobile_items-number">2.1.5.2.</span> <span class="toc_mobile_items-text">副本分布规则</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E4%BC%A0%E7%BB%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc_mobile_items-number">2.1.6.</span> <span class="toc_mobile_items-text">传统文件系统</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc_mobile_items-number">2.1.7.</span> <span class="toc_mobile_items-text">优缺点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc_mobile_items-number">2.1.8.</span> <span class="toc_mobile_items-text">相关操作</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#YARN"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">YARN</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E4%BA%A7%E7%94%9F%E8%83%8C%E6%99%AF"><span class="toc_mobile_items-number">2.2.1.</span> <span class="toc_mobile_items-text">产生背景</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc_mobile_items-number">2.2.2.</span> <span class="toc_mobile_items-text">概述</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%9E%B6%E6%9E%84-1"><span class="toc_mobile_items-number">2.2.3.</span> <span class="toc_mobile_items-text">架构</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc_mobile_items-number">2.2.4.</span> <span class="toc_mobile_items-text">执行流程</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#MapReduce"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">MapReduce</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#MapReduce%E6%A8%A1%E5%9E%8B"><span class="toc_mobile_items-number">2.3.1.</span> <span class="toc_mobile_items-text">MapReduce模型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4"><span class="toc_mobile_items-number">2.3.2.</span> <span class="toc_mobile_items-text">执行步骤</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc_mobile_items-number">2.3.3.</span> <span class="toc_mobile_items-text">核心功能</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc_mobile_items-number">2.3.4.</span> <span class="toc_mobile_items-text">核心概念</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-x"><span class="toc_mobile_items-number">2.3.5.</span> <span class="toc_mobile_items-text">1.x</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E5%88%86%E5%8C%BA%E7%BB%84%E4%BB%B6Partitioner"><span class="toc_mobile_items-number">2.3.6.</span> <span class="toc_mobile_items-text">分区组件Partitioner</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%8E%92%E5%BA%8F%E7%BB%84%E4%BB%B6-WritableComparable"><span class="toc_mobile_items-number">2.3.7.</span> <span class="toc_mobile_items-text">排序组件 WritableComparable</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E5%B1%80%E9%83%A8%E5%90%88%E5%B9%B6%E7%BB%84%E4%BB%B6-Combiner"><span class="toc_mobile_items-number">2.3.8.</span> <span class="toc_mobile_items-text">局部合并组件 Combiner</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E5%88%86%E7%BB%84%E7%BB%84%E4%BB%B6-group"><span class="toc_mobile_items-number">2.3.9.</span> <span class="toc_mobile_items-text">分组组件 group</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Shuffler"><span class="toc_mobile_items-number">2.3.10.</span> <span class="toc_mobile_items-text">Shuffler</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Map-Shuffler"><span class="toc_mobile_items-number">2.3.10.1.</span> <span class="toc_mobile_items-text">Map Shuffler</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#%E7%8E%AF%E5%BD%A2%E7%BC%93%E5%86%B2%E5%8C%BA"><span class="toc_mobile_items-number">2.3.10.1.1.</span> <span class="toc_mobile_items-text">环形缓冲区</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Reduce-Shuffer"><span class="toc_mobile_items-number">2.3.11.</span> <span class="toc_mobile_items-text">Reduce Shuffer</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#%E4%BC%98%E5%8A%BF"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">优势</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E9%AB%98%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">高可靠性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E9%AB%98%E6%89%A9%E5%B1%95%E6%80%A7"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">高扩展性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E5%85%B6%E4%BB%96"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text">其他</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#ZooKeeper"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">ZooKeeper</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">概述</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ZNode-ZooKeeper-Node"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">ZNode (ZooKeeper Node)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E7%B1%BB%E5%9E%8B"><span class="toc_mobile_items-number">4.2.1.</span> <span class="toc_mobile_items-text">类型</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E6%8C%81%E4%B9%85%E8%8A%82%E7%82%B9-persistent-zNode"><span class="toc_mobile_items-number">4.2.1.1.</span> <span class="toc_mobile_items-text">持久节点 persistent zNode</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E4%B8%B4%E6%97%B6%E8%8A%82%E7%82%B9-ephemeral-zNode"><span class="toc_mobile_items-number">4.2.1.2.</span> <span class="toc_mobile_items-text">临时节点 ephemeral zNode</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%8C%BA%E5%88%AB"><span class="toc_mobile_items-number">4.2.1.3.</span> <span class="toc_mobile_items-text">区别</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E7%9B%91%E5%90%AC%E6%9C%BA%E5%88%B6"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">监听机制</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc_mobile_items-number">4.4.</span> <span class="toc_mobile_items-text">功能</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E9%9B%86%E7%BE%A4%E8%A7%92%E8%89%B2"><span class="toc_mobile_items-number">4.5.</span> <span class="toc_mobile_items-text">集群角色</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Leader-%E4%B8%BB"><span class="toc_mobile_items-number">4.5.1.</span> <span class="toc_mobile_items-text">Leader 主</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Learner-%E4%BB%8E"><span class="toc_mobile_items-number">4.5.2.</span> <span class="toc_mobile_items-text">Learner 从</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Client"><span class="toc_mobile_items-number">4.5.3.</span> <span class="toc_mobile_items-text">Client</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E8%AE%BE%E8%AE%A1%E7%9B%AE%E7%9A%84-%E7%89%B9%E7%82%B9"><span class="toc_mobile_items-number">4.6.</span> <span class="toc_mobile_items-text">设计目的&#x2F;特点</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%8D%E5%88%B6%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc_mobile_items-number">4.6.1.</span> <span class="toc_mobile_items-text">数据复制的好处:</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%AE%B9%E9%94%99"><span class="toc_mobile_items-number">4.6.1.1.</span> <span class="toc_mobile_items-text">容错</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E6%89%A9%E5%B1%95%E6%80%A7"><span class="toc_mobile_items-number">4.6.1.2.</span> <span class="toc_mobile_items-text">扩展性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E9%AB%98%E6%80%A7%E8%83%BD"><span class="toc_mobile_items-number">4.6.1.3.</span> <span class="toc_mobile_items-text">高性能</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E7%89%B9%E7%82%B9"><span class="toc_mobile_items-number">4.6.2.</span> <span class="toc_mobile_items-text">特点</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc_mobile_items-number">4.6.2.1.</span> <span class="toc_mobile_items-text">最终一致性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="toc_mobile_items-number">4.6.2.2.</span> <span class="toc_mobile_items-text">可靠性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%AE%9E%E6%97%B6%E6%80%A7"><span class="toc_mobile_items-number">4.6.2.3.</span> <span class="toc_mobile_items-text">实时性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E7%AD%89%E5%BE%85%E6%97%A0%E5%85%B3-wait-free"><span class="toc_mobile_items-number">4.6.2.4.</span> <span class="toc_mobile_items-text">等待无关(wait-free)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E5%8E%9F%E5%AD%90%E6%80%A7"><span class="toc_mobile_items-number">4.6.2.5.</span> <span class="toc_mobile_items-text">原子性</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#%E9%A1%BA%E5%BA%8F%E6%80%A7"><span class="toc_mobile_items-number">4.6.2.6.</span> <span class="toc_mobile_items-text">顺序性</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#%E9%80%89%E4%B8%BELeader"><span class="toc_mobile_items-number">4.7.</span> <span class="toc_mobile_items-text">选举Leader</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E5%85%A8%E6%96%B0%E9%9B%86%E7%BE%A4%E9%80%89%E4%B8%BE"><span class="toc_mobile_items-number">4.7.1.</span> <span class="toc_mobile_items-text">全新集群选举</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#%E9%9D%9E%E5%85%A8%E6%96%B0%E9%9B%86%E7%BE%A4%E9%80%89%E4%B8%BE"><span class="toc_mobile_items-number">4.7.2.</span> <span class="toc_mobile_items-text">非全新集群选举</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Paxos"><span class="toc_mobile_items-number">4.8.</span> <span class="toc_mobile_items-text">Paxos</span></a></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Hadoop"><span class="toc-number">1.</span> <span class="toc-text">Hadoop</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9D%E8%AF%86"><span class="toc-number">2.</span> <span class="toc-text">初识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HDFS"><span class="toc-number">2.1.</span> <span class="toc-text">HDFS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3"><span class="toc-number">2.1.1.</span> <span class="toc-text">核心思想</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87"><span class="toc-number">2.1.2.</span> <span class="toc-text">设计目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.3.</span> <span class="toc-text">架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1"><span class="toc-number">2.1.4.</span> <span class="toc-text">核心设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%83%E8%B7%B3%E6%9C%BA%E5%88%B6"><span class="toc-number">2.1.4.1.</span> <span class="toc-text">心跳机制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#HDFS%E7%9A%84%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="toc-number">2.1.4.1.1.</span> <span class="toc-text">HDFS的启动流程：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.1.4.2.</span> <span class="toc-text">安全模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%AF%E6%9C%AC%E6%9C%BA%E5%88%B6"><span class="toc-number">2.1.4.3.</span> <span class="toc-text">副本机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">2.1.4.4.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%AF%E6%9C%AC%E6%9C%BA%E5%88%B6-1"><span class="toc-number">2.1.5.</span> <span class="toc-text">副本机制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%AF%E6%9C%AC%E5%AD%98%E6%94%BE%E7%AD%96%E7%95%A5"><span class="toc-number">2.1.5.1.</span> <span class="toc-text">副本存放策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%AF%E6%9C%AC%E5%88%86%E5%B8%83%E8%A7%84%E5%88%99"><span class="toc-number">2.1.5.2.</span> <span class="toc-text">副本分布规则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.1.6.</span> <span class="toc-text">传统文件系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">2.1.7.</span> <span class="toc-text">优缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C"><span class="toc-number">2.1.8.</span> <span class="toc-text">相关操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#YARN"><span class="toc-number">2.2.</span> <span class="toc-text">YARN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A7%E7%94%9F%E8%83%8C%E6%99%AF"><span class="toc-number">2.2.1.</span> <span class="toc-text">产生背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">2.2.2.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84-1"><span class="toc-number">2.2.3.</span> <span class="toc-text">架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number">2.2.4.</span> <span class="toc-text">执行流程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MapReduce"><span class="toc-number">2.3.</span> <span class="toc-text">MapReduce</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MapReduce%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.3.1.</span> <span class="toc-text">MapReduce模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.3.2.</span> <span class="toc-text">执行步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-number">2.3.3.</span> <span class="toc-text">核心功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-number">2.3.4.</span> <span class="toc-text">核心概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-x"><span class="toc-number">2.3.5.</span> <span class="toc-text">1.x</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%8C%BA%E7%BB%84%E4%BB%B6Partitioner"><span class="toc-number">2.3.6.</span> <span class="toc-text">分区组件Partitioner</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E7%BB%84%E4%BB%B6-WritableComparable"><span class="toc-number">2.3.7.</span> <span class="toc-text">排序组件 WritableComparable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%90%88%E5%B9%B6%E7%BB%84%E4%BB%B6-Combiner"><span class="toc-number">2.3.8.</span> <span class="toc-text">局部合并组件 Combiner</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E7%BB%84%E4%BB%B6-group"><span class="toc-number">2.3.9.</span> <span class="toc-text">分组组件 group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Shuffler"><span class="toc-number">2.3.10.</span> <span class="toc-text">Shuffler</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Map-Shuffler"><span class="toc-number">2.3.10.1.</span> <span class="toc-text">Map Shuffler</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%8E%AF%E5%BD%A2%E7%BC%93%E5%86%B2%E5%8C%BA"><span class="toc-number">2.3.10.1.1.</span> <span class="toc-text">环形缓冲区</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Reduce-Shuffer"><span class="toc-number">2.3.11.</span> <span class="toc-text">Reduce Shuffer</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF"><span class="toc-number">3.</span> <span class="toc-text">优势</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="toc-number">3.1.</span> <span class="toc-text">高可靠性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E6%89%A9%E5%B1%95%E6%80%A7"><span class="toc-number">3.2.</span> <span class="toc-text">高扩展性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">3.3.</span> <span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ZooKeeper"><span class="toc-number">4.</span> <span class="toc-text">ZooKeeper</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-1"><span class="toc-number">4.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ZNode-ZooKeeper-Node"><span class="toc-number">4.2.</span> <span class="toc-text">ZNode (ZooKeeper Node)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.2.1.</span> <span class="toc-text">类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E8%8A%82%E7%82%B9-persistent-zNode"><span class="toc-number">4.2.1.1.</span> <span class="toc-text">持久节点 persistent zNode</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E8%8A%82%E7%82%B9-ephemeral-zNode"><span class="toc-number">4.2.1.2.</span> <span class="toc-text">临时节点 ephemeral zNode</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8C%BA%E5%88%AB"><span class="toc-number">4.2.1.3.</span> <span class="toc-text">区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%91%E5%90%AC%E6%9C%BA%E5%88%B6"><span class="toc-number">4.3.</span> <span class="toc-text">监听机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc-number">4.4.</span> <span class="toc-text">功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E8%A7%92%E8%89%B2"><span class="toc-number">4.5.</span> <span class="toc-text">集群角色</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Leader-%E4%B8%BB"><span class="toc-number">4.5.1.</span> <span class="toc-text">Leader 主</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Learner-%E4%BB%8E"><span class="toc-number">4.5.2.</span> <span class="toc-text">Learner 从</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Client"><span class="toc-number">4.5.3.</span> <span class="toc-text">Client</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E7%9B%AE%E7%9A%84-%E7%89%B9%E7%82%B9"><span class="toc-number">4.6.</span> <span class="toc-text">设计目的&#x2F;特点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%A4%8D%E5%88%B6%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">4.6.1.</span> <span class="toc-text">数据复制的好处:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%B9%E9%94%99"><span class="toc-number">4.6.1.1.</span> <span class="toc-text">容错</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E6%80%A7"><span class="toc-number">4.6.1.2.</span> <span class="toc-text">扩展性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AB%98%E6%80%A7%E8%83%BD"><span class="toc-number">4.6.1.3.</span> <span class="toc-text">高性能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E7%82%B9"><span class="toc-number">4.6.2.</span> <span class="toc-text">特点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">4.6.2.1.</span> <span class="toc-text">最终一致性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%80%A7"><span class="toc-number">4.6.2.2.</span> <span class="toc-text">可靠性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E6%97%B6%E6%80%A7"><span class="toc-number">4.6.2.3.</span> <span class="toc-text">实时性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AD%89%E5%BE%85%E6%97%A0%E5%85%B3-wait-free"><span class="toc-number">4.6.2.4.</span> <span class="toc-text">等待无关(wait-free)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%AD%90%E6%80%A7"><span class="toc-number">4.6.2.5.</span> <span class="toc-text">原子性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%BA%E5%BA%8F%E6%80%A7"><span class="toc-number">4.6.2.6.</span> <span class="toc-text">顺序性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E4%B8%BELeader"><span class="toc-number">4.7.</span> <span class="toc-text">选举Leader</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E6%96%B0%E9%9B%86%E7%BE%A4%E9%80%89%E4%B8%BE"><span class="toc-number">4.7.1.</span> <span class="toc-text">全新集群选举</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E5%85%A8%E6%96%B0%E9%9B%86%E7%BE%A4%E9%80%89%E4%B8%BE"><span class="toc-number">4.7.2.</span> <span class="toc-text">非全新集群选举</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Paxos"><span class="toc-number">4.8.</span> <span class="toc-text">Paxos</span></a></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png)"><div id="post-info"><div id="post-title"><div class="posttitle">Hadoop相关</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-10-17<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2021-06-10</time><div class="post-meta-wordcount"><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><p>看了老是忘系列</p>
<h1 id="Hadoop"><a href="#Hadoop" class="headerlink" title="Hadoop"></a>Hadoop</h1><h1 id="初识"><a href="#初识" class="headerlink" title="初识"></a>初识</h1><p>概念：<br>狭义：适合大数据分布式存储（HDFS）、分布式计算（MapReduce）和资源调度（YARN）的ing台<br>广义：Hadoop生态系统，</p>
<h2 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h2><p>分布式文件系统<br>来源：GFS的克隆版本<br>特点：扩展性&容错性&海量数据存储<br>将文件切分成指定大小的数据块(block)并以多副本的形式存储在多个设备上 默认128M<br>默认3个备份</p>
<h3 id="核心思想"><a href="#核心思想" class="headerlink" title="核心思想"></a>核心思想</h3><ol>
<li>分散存储<br> 一个大文件的存储，借助分布式的存储系统，大文件进而分而治之的存储</li>
<li>冗余备份<br> 为保证在低成本设备上的数据安全，采用副本冗余策略  </li>
</ol>
<h3 id="设计目标"><a href="#设计目标" class="headerlink" title="设计目标"></a>设计目标</h3><p>巨大的分布式文件系统。</p>
<p>运行在廉价的硬件上</p>
<p>易扩展、性能不错的文件存储服务</p>
<h3 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h3><p>主从结构  </p>
<p><a target="_blank" rel="noopener" href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html">官方架构</a></p>
<p><img alt="官方架构图" data-src="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/images/hdfsarchitecture.png" class="lozad"></p>
<p>1个Master(NameNode/NN) 带N个Slaves(DataNode/DN)<br>HDFS/YARN/HBase 基于这种模式</p>
<p>一个文件会拆分成多个Block(存放块大小+副本个数) 通过blocksize (默认128M) 。<br>例如一个130M 的文件 => 2个Block: 128M + 2M</p>
<p>NN: </p>
<ol>
<li>负责客户端的响应 为客服端分配对应的DataNode</li>
<li>负责元数据(文件名称、副本系数、Block存放DN的地址 = 描述数据的数据)管理、维护元数据<br>　　WAL: (Write Ahead Log) 预写日志系统,所有的事务操作都会记录日志<br>　　元数据存放位置：<br>　　　　metedata: 内存中存放一份完成的原数据信息（目录树结构（文件位置信息） + 文件块映射（文件分成了几个块及对应的block id ） + 数据块和dataNode映射）<br>　　磁盘当中: fsimage + edits + edits_inprogress（目录树结构 + 文件块映射）<br>　　edits_inprogress会不断的变大 因为存放了相关的操作记录。通过分裂来避免单文件过大, 但是因为文件多过导致加载过慢,所以有了fsimage 将相关的edits日志合并<br>　　元数据合并：<br>　　　　1. 缩小了操作日志的大小<br>　　　　2. 方便nameNode快速的将元数据加载到内存中
　　　　</li>
<li>主从模式，由于一个NN 需要负责多个DN， 导致NN 能够管理的从节点数量是有限的。</li>
</ol>
<p>DN:  </p>
<ol>
<li>存储维护NameNode分配给它的数据块（Block）</li>
<li>定期向NN 发送心跳, 汇报其本身及其他所有block信息、健康状况</li>
<li>真正为客户端操作数据提供辅助  </li>
</ol>
<p>SecondeNode:<br>　　在分布式集群中才会出现</p>
<ol>
<li>分担NameNode元数据合并压力, 不要和NameNode在同个节点上</li>
</ol>
<h3 id="核心设计"><a href="#核心设计" class="headerlink" title="核心设计"></a>核心设计</h3><h4 id="心跳机制"><a href="#心跳机制" class="headerlink" title="心跳机制"></a>心跳机制</h4><p>HDFS心跳：<br>　　DataNode 每隔固定的时长，和NameNode通信以证明自己是存活的 （原因DataNode 运行在廉价机器中不可靠）<br>　　让NameNode 知道当前集群还有多少DataNode存活<br>　　发包作用：<br>　　1. 让NameNode识别各个DataNode存活状态<br>　　2. 心跳包数据<br>　　　　DataNode自身状态 可在主节点上 使用 hadoop dfsadmin -report 查看各个节点信息<br>　　　　DataNode节点保存的所有Block信息<br>　　　　　　例如 file.txt 分成了 blk-001 blk-002 两个块<br>　　　　　　心跳包中会上送告诉NameNode blk-001: hadoop01,hadoop02  blk-002:hadoop02,hadoop03<br>　　　　超时标准：timeout(超时时长) = 10 * 心跳时长（dfs.heartbeat.intercal = 3s） + 2 * 检查心跳机制是否正常的时间(heartbeat.recheck.intercal = 300s) = 630s  </p>
<h5 id="HDFS的启动流程："><a href="#HDFS的启动流程：" class="headerlink" title="HDFS的启动流程："></a>HDFS的启动流程：</h5><pre><code>1、先启动namenode进程
2、加载namenode存储的磁盘的元数据信息
3、namenode在启动之后，会在自己的节点启动一个服务，这个服务：等待所有的datanode的上线和汇报他们的数据块的内容。
4、datanode一旦上线，就通过心跳机制进行汇报。
5、只有当namenode等到了所有的datanode的上线以及把所有的块信息都汇报完毕，最后namenode才能得知整个集群中文件的数据块的副本的存放状况</code></pre>
<h4 id="安全模式"><a href="#安全模式" class="headerlink" title="安全模式"></a>安全模式</h4><p>进入安全模式：<br>    1. 当HDFS集群的部分datanode节点宕机之后，HDFS启动一些服务，做自我恢复<br>    2. 当丢失的数据达到0.1%比例的时候会进入安全模式  </p>
<pre><code>命令：
    hdfs dfsadmin -safemode enter //进去安全模式
    hdfs dfsadmin -safemode leave //离开安全模式
    hdfs dfsadmin -safemode get //查看安全模式
    hdfs dfsadmin -safemode wait //等待</code></pre>
<h4 id="副本机制"><a href="#副本机制" class="headerlink" title="副本机制"></a>副本机制</h4><p>定义：决定一个数据块的多个副本（默认是3）到底是应该选取哪些服务器节点进行存储<br>    策略：<br>        1、第一个副本块选取和客户端相同的节点上<br>        2、第二个副本块选取跟第一副本的存储节点相邻机架上的任意一个节点<br>        3、第三个副本块在和第二个副本块所在机架不同的节点上  </p>
<pre><code>实际：选取不忙的节点。</code></pre>
<h4 id><a href="#" class="headerlink" title></a></h4><h3 id="副本机制-1"><a href="#副本机制-1" class="headerlink" title="副本机制"></a>副本机制</h3><p>因为HDFS可以采用廉价设备导致有数据丢失的可能所以需要有效的副本机制<br><img alt="官方架构图" data-src="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/images/hdfsdatanodes.png" class="lozad"></p>
<h4 id="副本存放策略"><a href="#副本存放策略" class="headerlink" title="副本存放策略"></a>副本存放策略</h4><p>鸡蛋不要都放在一个篮子里<br>多副本  </p>
<h4 id="副本分布规则"><a href="#副本分布规则" class="headerlink" title="副本分布规则"></a>副本分布规则</h4><ol>
<li>数据备份数量由客户端指定<br> 如果集群有3个节点，但是数据需要存放4份，最后系统只能存放3份。</li>
<li>同个文件备份不放在一个节点中暨HDFS集群中的任何节点, 没有完全相同的两份数据。</li>
</ol>
<h3 id="传统文件系统"><a href="#传统文件系统" class="headerlink" title="传统文件系统"></a>传统文件系统</h3><p>A.0.5T B.20G C.50G D.1T</p>
<p>1号盘存A </p>
<p>2号盘存A B</p>
<p>3号盘存A B C</p>
<p>4号盘存A B C D</p>
<p>5号盘存B C D</p>
<p>6号盘存C D</p>
<p>7号盘存D</p>
<p>这种方式类似 Raid1</p>
<p>缺点：</p>
<ol>
<li>不管文件多大都存在一个节点上, 在进行数据处理的时候很难并行处理。</li>
<li>存储负载不容易均衡,导致节点利用率比较低</li>
</ol>
<h3 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h3><ol>
<li>优点：<br> 数据冗余备份、硬件容错<br> 适合存储大文件<br> 处理流式的数据访问<br> 可构架在廉价的设备上  </li>
<li>缺点<br> 低延迟的数据访问<br> 不适合小文件存储 文件元数据存在NN 中，小文件多元数据也很多那NN 内存占用大压力大<br> 单点故障问题：高可用集群方案（ZooKeeper）<br> 内存受限：联邦集群</li>
</ol>
<h3 id="相关操作"><a href="#相关操作" class="headerlink" title="相关操作"></a>相关操作</h3><p>其实和Linux 中的文件操作比较类似<br>hadoop fs ***<br>可以直接通过 hadoop fs 查看相关命令<br>比如 hadoop fs -cat /test.txt = cat /test.txt</p>
<h2 id="YARN"><a href="#YARN" class="headerlink" title="YARN"></a>YARN</h2><p>资源调度系统<br>特点：扩展性&容错性&多框架资源统一调度<br>负责集群资源的管理和调度</p>
<h3 id="产生背景"><a href="#产生背景" class="headerlink" title="产生背景"></a>产生背景</h3><p>MapRduce1.x 单节点故障+单节点压力大不容易扩展(JobTracker任务重压力大)+不能够支持MapReduce外的框架引擎</p>
<p>资源利用率&运维成本</p>
<p>YARN:<br>    不同的计算框架可以共享同一个HDFS集群上的数据，享受整体的资源调度<br>    XXX on YARN<br>    XXX : Spark/MapReduce/Storm/Flink<br>    好处： 与其他计算框架共享集群资源，按资源需要分配,进而提高集群资源的利用率</p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><pre><code>Yet Another Resoutce Negotiator  
通用的资源管理系统  
为上层应用提供同意的资源管理和调度</code></pre>
<h3 id="架构-1"><a href="#架构-1" class="headerlink" title="架构"></a>架构</h3><p><img alt="官方架构图" data-src="https://hadoop.apache.org/docs/stable/hadoop-yarn/hadoop-yarn-site/yarn_architecture.gif" class="lozad"></p>
<ol>
<li><p>ResourceManager -> RM<br> 一个RM 带多个NM<br> 整个集群同一时间提供服务的RM只有一个，负责集群资源的统一管理和调度<br> 处理客户端的请求：提交一个作业、杀死一个作业<br> 监控NM 一旦某个NM挂了， 那么该NM上运行的任务需要告诉AM来如何处理<br> 调度器（Schedule）常见的有：  </p>
<pre><code> FIFO                先进先出(First in First out)  
 Fair Schedule       公平调度(各个任务平分资源 不管任务大小)  
 Capacity Schedule   容量调度(任务调度分配)  </code></pre>
</li>
<li><p>NodeManager -> NM<br> 整个集群中有多个， 负责本身节点资源管理和使用。<br> 定时汇报向RM 汇报本节点的资源使用情况<br> 接手并处理来自RM 的各种命令：启动Container<br> 处理来自AM的命令<br> 单个节点的资管管理</p>
</li>
<li><p>ApplicationMater -> AM<br> 每个应用程序（MR、Spark）对应一个,负责应用程序的管理<br> 为应用程序向RM 申请资源（core、memory）, 分配个内部task<br> 需要与NM通信：启动/停止task， task是运行在container里面，AM也是运行在container里面</p>
</li>
<li><p>Container<br> 封装了CPU、Memory等资源的容器<br> 是一个任务运行环境的抽象 </p>
</li>
<li><p>Client<br> 提交作业<br> 查询作业的运行进度<br> 杀死作业</p>
</li>
</ol>
<h3 id="执行流程"><a href="#执行流程" class="headerlink" title="执行流程"></a>执行流程</h3><p>Client 提交作业 -> RM 为作业分配第一个Container(运行在一个 A  NM) -> RM 与 NM 通信 要求在这个NM 启动一个container 用于启动AM -> AM 与RM 进行注册 （保持通信） 进行资源申请（RM） 汇报状态 -> 在对应的NM 启动任务</p>
<h2 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h2><pre><code>分布式计算框架/编程模型</code></pre>
<p>特点：扩展性&容错性&海量数据离线处理<br>缺点：无法实时流计算</p>
<h3 id="MapReduce模型"><a href="#MapReduce模型" class="headerlink" title="MapReduce模型"></a>MapReduce模型</h3><pre><code>任务的并发 + 结果的汇总
将作业拆分为Map阶段(并发)和Reduce阶段(汇总)  
Map阶段: 一堆的Map Tasks  
Reduce阶段: 一堆的Reduce Tasks  
每个任务都有个主调度程序MRAppMaster (MapReduct Application Master)</code></pre>
<h3 id="执行步骤"><a href="#执行步骤" class="headerlink" title="执行步骤"></a>执行步骤</h3><ol>
<li>准备Map处理的输入数据</li>
<li>Mapper处理</li>
<li>Shuffle 汇总清洗数据(将相同的key 发送到相同到节点中) 包含分区、排序、局部合并、分组</li>
<li>Reduce处理</li>
<li>结果输出</li>
</ol>
<h3 id="核心功能"><a href="#核心功能" class="headerlink" title="核心功能"></a>核心功能</h3><pre><code>将用户编写的业务逻辑代码和自带默认组件整合成一个完整的分布 式运算程序，并发运行在一个 Hadoop 集群上。</code></pre>
<h3 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h3><ol>
<li>Split: 交由MapReduce作业来处理的数据块 （与HDFS的BlockSize的区别 是HDFS 最小的存储单元）, 是MapReduce的最小计算单元. 默认与HDFS的BlockSize一一对应</li>
<li>InputFormat: 将输入数据进行分片(Split)</li>
<li>OutputFormat: 将分片处理后的数据合并输出</li>
</ol>
<h3 id="1-x"><a href="#1-x" class="headerlink" title="1.x"></a>1.x</h3><!-- Master/Slave架构， 1个JobTracker 带多个RaskReacker   -->
<p>2.x开始 这部分功能迁移到YARN中处理</p>
<ol>
<li>JobTracker: (管理者)<br> 　　负责资源管理和作业调度<br> 　　将作业分解为一堆任务:Task (MapTask和ReduceTask)<br> 　　将任务分派给TaskTracker运行<br> 　　作业的监控、容错处理<br> 　　在一定的时间间隔内, JT没有收到TT的心跳消息, TT可能挂了, TT上运行的任务会被JT 指派到其他TT上执行</li>
<li>TaskTracker：(干活的)<br> 　　定期向JT汇报本节点的健康状况、资源使用情况、作业执行情况；<br> 　　接收来自JT的命令：启动任务、杀死任务<br> 　　在TT上执行Task(MapTask、ReduceTask)<br> 　　与JT 交互信息: 执行、停止、启动, 发送心跳信息给JT。<br>、</li>
</ol>
<h3 id="分区组件Partitioner"><a href="#分区组件Partitioner" class="headerlink" title="分区组件Partitioner"></a>分区组件Partitioner</h3><p>根据单词的长度给单词出现的次数的结果存储到不同文件中，以便于在快速查询  </p>
<h3 id="排序组件-WritableComparable"><a href="#排序组件-WritableComparable" class="headerlink" title="排序组件 WritableComparable"></a>排序组件 WritableComparable</h3><pre><code>序列化 (Serialization) :结构化对象转化为字节流      
反序列化 (Deserialization):把字节流转为结构化对象。  
Java 的序列化是一个重量级序列化框架(Serializable)，一个对象被序列化后，会附带很多额 外 的信息(各种校验信息，header，继承体系等)，不便于在网络中高效传输;所以，hadoop 自己开发 了一套序列化机制(Writable)，更加精简高效。</code></pre>
<p>Writable 有一个子接口是 WritableComparable，WritableComparable 是既可实现序列化， 也可以对key进行比较，我们这里可以通过自定义 Key 实现 WritableComparable 来实现我们的排序功 能。</p>
<h3 id="局部合并组件-Combiner"><a href="#局部合并组件-Combiner" class="headerlink" title="局部合并组件 Combiner"></a>局部合并组件 Combiner</h3><pre><code>Combiner 是 MapReduce 程序中 Mapper 和 Reducer 之外的一种组件，它的作用是在 maptask 之后给 maptask 的结果进行局部汇总，以减轻 reducetask 的计算负载，减少网络传输
写法类似Reducer</code></pre>
<h3 id="分组组件-group"><a href="#分组组件-group" class="headerlink" title="分组组件 group"></a>分组组件 group</h3><pre><code>* 实现分组有固定的步骤：
     * 1、继承WritableComparator
     * 2、调用父类的构造器
     * 3、指定分组的规则，重写一个方法</code></pre>
<h3 id="Shuffler"><a href="#Shuffler" class="headerlink" title="Shuffler"></a>Shuffler</h3><pre><code>数据汇洗,将 maptask 输出的处理结果数据，分发给 reducetask。
map 阶段处理的数据如何传递给 reduce 阶段，是 MapReduce 框架中最关键的一个流程，这个流程就叫 Shuffle</code></pre>
<h4 id="Map-Shuffler"><a href="#Map-Shuffler" class="headerlink" title="Map Shuffler"></a>Map Shuffler</h4><pre><code>Mapper 阶段的数据进行分区，做完了分区之后 每个ReduceTask 只需要取对应分区编号的数据(ReduceTask怎么知道要取哪个分区的)
mapper context.write 会将写入的数据放到 环形缓冲区 中</code></pre>
<h5 id="环形缓冲区"><a href="#环形缓冲区" class="headerlink" title="环形缓冲区"></a>环形缓冲区</h5><pre><code>内存中一种收尾相连的数据结构(内存区域)，用于存放mapper中处理的数据, 每个MapTask独立使用一个环形缓冲区在MapTask初始化时创建(对数据进行分析分区)。
主要维护了一个 kvbuffer的字节数组 默认100m
>100m 了触发溢写: 内存中数据超过100m 后会将数据持久化到硬盘中
溢写流程：
    1. 初始化的时候对数据分区
    2. 分区前排序 快排
    3. 如果设置了Combiner 会先调用Combiner进行合并 减少数据量</code></pre>
<h3 id="Reduce-Shuffer"><a href="#Reduce-Shuffer" class="headerlink" title="Reduce Shuffer"></a>Reduce Shuffer</h3><pre><code>主动读取Map Shuffler后的数据</code></pre>
<h1 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h1><h2 id="高可靠性"><a href="#高可靠性" class="headerlink" title="高可靠性"></a>高可靠性</h2><ol>
<li>数据存储：数据块多副本</li>
<li>数据计算：重新调度作业计算<h2 id="高扩展性"><a href="#高扩展性" class="headerlink" title="高扩展性"></a>高扩展性</h2></li>
<li>存储、计算资源不够时，可以横向的限行扩展机器</li>
<li>一个集群中可以包含数以千计的节点<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2></li>
<li>存储在链家机器上，降低成本</li>
<li>成熟的生态圈</li>
</ol>
<h1 id="ZooKeeper"><a href="#ZooKeeper" class="headerlink" title="ZooKeeper"></a>ZooKeeper</h1><h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><pre><code>分布式应用程序协调服务  
用来解决分布式系统中一些业务协调问题  </code></pre>
<p>基于Google的 Chubby 分布式锁<br>底层算法Paxos</p>
<h2 id="ZNode-ZooKeeper-Node"><a href="#ZNode-ZooKeeper-Node" class="headerlink" title="ZNode (ZooKeeper Node)"></a>ZNode (ZooKeeper Node)</h2><p>可用于存储数据(key-value的形式 key:节点的绝对路径 value:该节点值)、也能挂载子节点<br>只能存储小量数据 (1M)</p>
<h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><p>不管什么节点都会创建会话 session</p>
<h4 id="持久节点-persistent-zNode"><a href="#持久节点-persistent-zNode" class="headerlink" title="持久节点 persistent zNode"></a>持久节点 persistent zNode</h4><pre><code>1. 带顺序编号的持久节点 (create -s xxxx)
2. 不带顺序编号的持久节点 (create xxxx)</code></pre>
<h4 id="临时节点-ephemeral-zNode"><a href="#临时节点-ephemeral-zNode" class="headerlink" title="临时节点 ephemeral zNode"></a>临时节点 ephemeral zNode</h4><pre><code>1. 带顺序编号的临时节点
2. 不带顺序编号的临时节点</code></pre>
<h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><pre><code>临时节点删除随着session断开而自动删除
临时节点下面不能有其他子节点(因为上一点 节点删除时间未知的。)</code></pre>
<h2 id="监听机制"><a href="#监听机制" class="headerlink" title="监听机制"></a>监听机制</h2><pre><code>client对哪个节点感兴趣对哪个节点注册一个监听、改节点有数据变化时通知client  
组成  
1. client
2. client WatcherManageer
3. ZooKeeper服务器</code></pre>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ol>
<li><p>命名服务</p>
</li>
<li><p>配置管理</p>
</li>
<li><p>集群管理</p>
</li>
<li><p>分布式锁</p>
</li>
<li><p>队列管理</p>
</li>
</ol>
<h2 id="集群角色"><a href="#集群角色" class="headerlink" title="集群角色"></a>集群角色</h2><h3 id="Leader-主"><a href="#Leader-主" class="headerlink" title="Leader 主"></a>Leader 主</h3><pre><code>集群主节点  
负责投票的发起和决议,更新系统状态。其他节点写入操作的时候会通过Leader发起请求</code></pre>
<h3 id="Learner-从"><a href="#Learner-从" class="headerlink" title="Learner 从"></a>Learner 从</h3><pre><code>Follower: 跟随者
    普通节点
    用于接受客户端请求和返回客户端请求结果，参与选主投票  
Observer: 观察者
    Observer可以接受客户端（Client）连接，并将客户端请求转发给Leader,不参与选主投票,只同步Leader状态,其主要作用为了扩展系统,提高读取速度(ZooKeeper压力过大时想临时添加节点用于负载峰值过后可撤走 这时候的节点就可以是 Observer节点 因为没有选举权和被选举券不会变成Leader节点所以能随时撤走)  </code></pre>
<h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><pre><code>发起相关请求</code></pre>
<h2 id="设计目的-特点"><a href="#设计目的-特点" class="headerlink" title="设计目的/特点"></a>设计目的/特点</h2><pre><code>ZooKeeper 作为一个集群提供数据一致的协调服务，自然，最好的方式就是在整个集群中的各服务节</code></pre>
<p>点进行数据的复制和同步</p>
<h3 id="数据复制的好处"><a href="#数据复制的好处" class="headerlink" title="数据复制的好处:"></a>数据复制的好处:</h3><h4 id="容错"><a href="#容错" class="headerlink" title="容错"></a>容错</h4><pre><code>一个节点出错，不至于让整个集群无法提供服务。  </code></pre>
<h4 id="扩展性"><a href="#扩展性" class="headerlink" title="扩展性"></a>扩展性</h4><pre><code>通过增加服务器节点能提高 ZooKeeper 系统的负载能力，把负载分布到多个节点上。 </code></pre>
<h4 id="高性能"><a href="#高性能" class="headerlink" title="高性能"></a>高性能</h4><pre><code>客户端可访问本地 ZooKeeper 节点或者访问就近的节点，依次提高用户的访问速度。</code></pre>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><h4 id="最终一致性"><a href="#最终一致性" class="headerlink" title="最终一致性"></a>最终一致性</h4><pre><code>client 不论连接到哪个 Server，展示给它都是同一个ZNode视图，这是 ZooKeeper 最重要 的性能。</code></pre>
<h4 id="可靠性"><a href="#可靠性" class="headerlink" title="可靠性"></a>可靠性</h4><pre><code>具有简单、健壮、良好的性能，如果消息 m 被到一台服务器接受，那么它将被所有的服务 器接受。</code></pre>
<h4 id="实时性"><a href="#实时性" class="headerlink" title="实时性"></a>实时性</h4><pre><code>ZooKeeper 保证客户端将在一个时间间隔范围内获得服务器的更新信息，或者 服务器失 效的信息。但由于网络延时等原因，ZooKeeper 不能保证两个客户端能同时得到刚更新的数据，如果 需要最新数据，应该在读数据之前调用 sync()接口。</code></pre>
<h4 id="等待无关-wait-free"><a href="#等待无关-wait-free" class="headerlink" title="等待无关(wait-free)"></a>等待无关(wait-free)</h4><pre><code>慢的或者失效的 client 不得干预快速的 client 的请求，使得每个 client 都 能有效的等待</code></pre>
<h4 id="原子性"><a href="#原子性" class="headerlink" title="原子性"></a>原子性</h4><pre><code>更新只能成功或者失败，没有中间状态。</code></pre>
<h4 id="顺序性"><a href="#顺序性" class="headerlink" title="顺序性"></a>顺序性</h4><pre><code>包括全局有序和偏序两种:全局有序是指如果在一台服务器上消息 a 在消息 b 前发布，则 在所有 Server 上消息 a 都将在消息 b 前被发布;偏序是指如果一个消息 b 在 消息 a 后被同一个发送者 发布，a 必将排在 b 前面。</code></pre>
<h2 id="选举Leader"><a href="#选举Leader" class="headerlink" title="选举Leader"></a>选举Leader</h2><h3 id="全新集群选举"><a href="#全新集群选举" class="headerlink" title="全新集群选举"></a>全新集群选举</h3><pre><code>serverId （就是配置里面的 myid 0-255 权威指南里面说1-255 但是0 实际过程中也能用） 
serverId 大的就是Leader</code></pre>
<h3 id="非全新集群选举"><a href="#非全新集群选举" class="headerlink" title="非全新集群选举"></a>非全新集群选举</h3><pre><code>根据 数据版本、全局时钟、serverId 三个因素决定  
优先级：数据版本 > 全局时钟 > serverId
集群中超过半数同意,就能选举出Leader 所以建议节点数是奇数 不会出现平票</code></pre>
<h2 id="Paxos"><a href="#Paxos" class="headerlink" title="Paxos"></a>Paxos</h2><pre><code>一种基于消息传递且具有高度容错性的一致性算法</code></pre>
</body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Fibonacci</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://sovwcwsfm.com/blog/page/hadoop.html">http://sovwcwsfm.com/blog/page/hadoop.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://sovwcwsfm.com">Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Hadoop/">Hadoop    </a><a class="post-meta__tags" href="/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据    </a></div><div class="post_share"></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/blog/page/hive.html"><img class="prev_cover lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>Hive相关</span></div></a></div><div class="next-post pull-right"><a href="/blog/page/handler.html"><img class="next_cover lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>Handler相关</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/blog/page/flume.html" title="Flume相关"><img class="relatedPosts_cover lozad"data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><div class="relatedPosts_title">Flume相关</div></a></div><div class="relatedPosts_item"><a href="/blog/page/hbase.html" title="HBase相关"><img class="relatedPosts_cover lozad"data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><div class="relatedPosts_title">HBase相关</div></a></div><div class="relatedPosts_item"><a href="/blog/page/hive.html" title="Hive相关"><img class="relatedPosts_cover lozad"data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><div class="relatedPosts_title">Hive相关</div></a></div><div class="relatedPosts_item"><a href="/blog/page/kafka.html" title="Kafka相关"><img class="relatedPosts_cover lozad"data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><div class="relatedPosts_title">Kafka相关</div></a></div><div class="relatedPosts_item"><a href="/blog/page/spark.html" title="Spark相关"><img class="relatedPosts_cover lozad"data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><div class="relatedPosts_title">Spark相关</div></a></div><div class="relatedPosts_item"><a href="/blog/page/datawarehouse.html" title="数仓相关"><img class="relatedPosts_cover lozad"data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><div class="relatedPosts_title">数仓相关</div></a></div></div><div class="clear_both"></div></div></div></div><footer><div id="footer"><div class="copyright">&copy;2018 - 2021 By Fibonacci</div><div class="framework-info"><span>驱动 </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">繁</a><i class="nightshift fa fa-moon-o" id="nightshift" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/nightshift.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();
</script></body></html>